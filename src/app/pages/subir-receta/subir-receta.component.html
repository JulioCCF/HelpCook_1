<!-- Seccion logo -->
<div class="text-center" style="margin-top: 30px; margin-bottom: 30px">
  <a class="nav-link" routerLink=""
    ><img src="/assets/img/logo.png" class="w-25" alt=""
  /></a>
</div>
<form enctype="multipart/form-data">
  <!-- Imagen -->
  <div class="mb-3">
    <label class="form-label fw-bold text-center mt-3" for="InputFoto"
      >Adjunta la imagen</label
    >
    <input
      class="form-control fs-5"
      type="file"
      name="foto"
      id="InputFoto"
      [(ngModel)]="foto"
      required
      (change)="onFileSelected($event)"
    />
  </div>
  <!-- Titulo receta -->
  <div class="mb-3">
    <label class="form-label fw-bold text-center mt-3" for="InputTitulo"
      >Título</label
    >
    <input
      class="form-control fs-5"
      type="text"
      name="titulo"
      id="InputTitulo"
      placeholder="Introduce el título de la receta"
      [(ngModel)]="titulo"
    />
  </div>
  <!-- Descripción receta -->
  <div class="mb-3">
    <label class="form-label fw-bold text-center mt-3" for="InputDescripcion"
      >Descripción</label
    >
    <input
      class="form-control fs-5"
      type="text"
      name="descripcion"
      id="InputDescripcion"
      placeholder="Breve descripción de tu receta"
      [(ngModel)]="descripcion"
    />
  </div>
  <!-- Barra categorías -->
  <div class="text-center mt-5">
    <label class="form-label fw-bold text-center mt-3" for="FormControlImput1"
      >Categoría</label
    >
    <div
      class="btn-group barracategorias"
      role="group"
      aria-label="Basic example"
    >
      <button
        type="button"
        class="btn iconosbarra"
        (click)="capturarCategorias($event)"
        
      >
        <img
          src="/assets/iconos/carnes.png"
          width="40px"
          style="margin-left: 30px"
          alt="Carnes"
        />
      </button>
      <button
        type="button"
        class="btn iconosbarra"
        (click)="capturarCategorias($event)"
      >
        <img
          src="/assets/iconos/pescado.png"
          width="40px"
          style="margin-left: 30px"
          alt="Pescados"
        />
      </button>
      <button
        type="button"
        class="btn iconosbarra"
        (click)="capturarCategorias($event)"
      >
        <img
          src="/assets/iconos/legumbres.png"
          width="40px"
          style="margin-left: 30px"
          alt="Legumbres"
        />
      </button>
      <button
        type="button"
        class="btn iconosbarra"
        (click)="capturarCategorias($event)"
      >
        <img
          src="/assets/iconos/arroces.png"
          width="40px"
          style="margin-left: 30px"
          alt="Arroces"
        />
      </button>
      <button
        type="button"
        class="btn iconosbarra"
        (click)="capturarCategorias($event)"
      >
        <img
          src="/assets/iconos/pasta.png"
          width="40px"
          style="margin-left: 30px"
          alt="Pastas"
        />
      </button>
      <button
        type="button"
        class="btn iconosbarra"
        (click)="capturarCategorias($event)"
      >
        <img
          src="/assets/iconos/verduras.png"
          width="40px"
          style="margin-left: 30px"
          alt="Verduras"
        />
      </button>
      <button
        type="button"
        class="btn iconosbarra"
        (click)="capturarCategorias($event)"
      >
        <img
          src="/assets/iconos/setas.png"
          width="40px"
          style="margin-left: 30px"
          alt="Setas"
        />
      </button>
      <button
        type="button"
        class="btn iconosbarra"
        (click)="capturarCategorias($event)"
      >
        <img
          src="/assets/iconos/postre1.png"
          width="40px"
          style="margin-left: 30px; margin-right: 30px"
          alt="Postres"
        />
      </button>
    </div>
  </div>
  <!-- Comensales -->
  <div class="row">
    <div class="col">
      <label
        class="form-label custom-label fw-bold mt-5 ms-5"
        for="InputComensales"
        >Comensales</label
      >
      <input
        class="form-control fs-5"
        type="number"
        name="comensales"
        id="InputComensales"
        placeholder="4"
        style="width: 200px"
        [(ngModel)]="comensales"
      />
    </div>
    <!-- Tiempo de preparación -->
    <div class="col">
      <label class="form-label custom-label fw-bold mt-5" for="idPreparacion"
        >Tiempo de preparación</label
      >
      <input
        class="form-control fs-5"
        type="number"
        name="preparacion"
        id="idPreparacion"
        placeholder="120"
        style="width: 200px"
        [(ngModel)]="tiempo"
      />
    </div>
  </div>
  <!--Ingredientes-->
    <div class = "row"> 
      <label
      class="form-label custom-label fw-bold mt-3 ms-5 text-center" 
      for="InputIngredientesTipo"
      >Ingredientes</label
    >
   <!-- Selección tipo Ingredientes ---> 
    <div class="col md-5;" >  
      <select
        class="form-select form-select fw-bold mt-2"
        for="InputIngredientesTipo"
        aria-label=".form-select-lg example"
        (change)="tipo($event)"
      >
        <option value="">Selecciona el tipo de ingrediente</option>
        <option *ngFor="let tipo of tiposUnicos" [value]="tipo">
          {{ tipo }}
        </option>
      </select>

     <!-- Selección Ingredientes y su cantidad--->
      <div class="form-check" *ngIf="tipoSeleccionado" style="margin-top: 15px" [hidden]="ocultarIngredientes">
        <div *ngFor="let ingXTipo of ingredientesXTipo">
          <input
            class="form-check-input"
            type="checkbox"
            id="{{ ingXTipo.idIngrediente }}"
            [checked]="ingXTipo.seleccionado"
            value="{{ ingXTipo.idIngrediente }}"
            (change)="ingSelect(ingXTipo)"
          />{{ ingXTipo.nombre }}
          <input
            *ngIf="ingXTipo.seleccionado"
            class="form-control"
            type="text"
            name="ingr{{ ingXTipo.idIngrediente }}"
            id="cantidad{{ ingXTipo.idIngrediente }}"
            placeholder="Cantidad"
            [value]="ingXTipo.cantidad"
            (input)="setCantidad($event.target['value'], ingXTipo)"
          />
        </div>
      </div>
    </div>
  <!--Panel que muestra los ingredientes seleccionados-->   
    <div class = "col" style="margin-top: 10px; margin-left: 120px;" >
      <h5 >Ingredientes seleccionados:</h5>
      <ul [hidden]="ocultarIngredientes">
        <li *ngFor="let ingSelect of ingredientes">{{ingSelect.nombre}} - {{ingSelect.cantidad}}</li>
      </ul>
    </div> 
    <div style="margin-top:50px">
      <button type="submit" class="btn btn-primary"  ocultarIngredientes = true; (click)="ocultar();" >
        Añadir los Ingredientes
      </button>
    </div>   
        <br />
        <br />
       
      
  </div>
  
  

  <!-- Pasos -->
  <div id="pasos-container">
    <div class="row paso">
      <div class="col">
        <label
          class="form-label custom-label fw-bold mt-3"
          for="InputDescripPaso"
          >Paso 1</label
        >
        <textarea
          name="text"
          id="InputDescripPaso"
          cols="50"
          rows="3"
        ></textarea>
      </div>
      <div class="col">
        <label class="form-label fw-bold text-center mt-3" for="InputFotoPaso"
          >Adjunta la imagen</label
        >
        <input
          class="form-control mt-4 fs-5"
          type="file"
          name="formFile"
          id="InputFotoPaso"
          required
          (change)="onFileSelectedPasos($event)"
        />
      </div>
    </div>
  </div>
  <!-- Botón añadir más pasos -->
  <p>
    <a
      class="btn-mostrarmas text-center mt-5"
      role="button"
      id="agregar-paso-link"
      (click)="agregarPaso()"
      >Pulsar para añadir el paso a la receta, Añadir Paso {{ numPasos }}</a
    >
  </p>

  <br />
  <br />
  <!-- Botón enviar -->
  <button type="submit" class="btn btn-primary" (click)="subirReceta()">Enviar</button>
  
</form>
